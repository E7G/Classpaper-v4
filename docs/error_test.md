# 错误处理测试说明

## 已实现的功能

1. **Windows弹窗通知**：当无法创建alcro窗口时，会显示Windows原生错误弹窗
2. **详细错误信息**：弹窗包含可能的原因分析
3. **日志记录**：所有错误都会被记录到app.log文件
4. **多处错误处理**：
   - 主窗口创建失败
   - 设置窗口创建失败
   - 托盘重启功能失败

## 错误处理场景

### 场景1：主窗口创建失败
- 触发时机：程序启动时
- 行为：显示错误弹窗，程序退出
- 错误信息：包含浏览器未安装、路径错误等可能原因

### 场景2：设置窗口创建失败
- 触发时机：点击托盘菜单"设置"时
- 行为：显示错误弹窗，但不退出主程序
- 错误信息：特定于设置窗口的错误

### 场景3：托盘重启功能失败
- 触发时机：点击托盘菜单"重启网页显示程序"时
- 行为：显示错误弹窗，保持原窗口
- 错误信息：特定于重启功能的错误

## 测试方法

可以通过以下方式测试错误处理：

1. **修改浏览器路径**：在config.toml中设置一个不存在的浏览器路径
2. **移除Chrome/Edge**：临时卸载或重命名浏览器可执行文件
3. **权限测试**：以受限用户身份运行程序

## 新增函数

### winapi.rs中新增：
- `show_error_notification(message: &str)` - 显示Windows错误弹窗
- `handle_window_creation_error(error: &str)` - 统一处理窗口创建错误

### main.rs中修改：
- `create_window()` 现在返回 `Result<UI, Box<dyn std::error::Error>>`
- 所有调用点都正确处理了错误情况